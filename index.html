<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Ø®Ø§Ø·Ø±Ø§Øª Ù…Ø§ | Ù†Ø³Ø®Ù‡ AR</title>

    <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
    <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>

    <style>
        /* --- Ú©Ø¯Ù‡Ø§ÛŒ CSS --- */
        @import url('https://fonts.googleapis.com/css2?family=Vazirmatn:wght@400;700&display=swap');

        :root {
            --primary-bg: #0a192f;
            --text-light: #ccd6f6;
            --accent: #64ffda;
            --accent-dark: rgba(100, 255, 218, 0.1);
        }

        body {
            font-family: 'Vazirmatn', sans-serif;
            background-color: var(--primary-bg);
            color: var(--text-light);
            margin: 0; 
            overflow: hidden;
        }

        .overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            display: flex; justify-content: center; align-items: center;
            flex-direction: column; text-align: center;
            background-color: rgba(10, 25, 47, 0.95);
            z-index: 100; opacity: 0; visibility: hidden;
            transition: opacity 0.5s ease, visibility 0.5s ease;
        }

        .overlay.active { opacity: 1; visibility: visible; }
        .content { padding: 20px; }
        h1 { font-size: 2.8rem; color: white; margin-bottom: 1rem; }
        p { font-size: 1.2rem; margin-bottom: 2.5rem; max-width: 500px; }

        .button-container {
            display: flex; flex-direction: column; gap: 15px;
            width: 100%; max-width: 350px; margin: 0 auto;
        }

        .action-button {
            background: transparent; color: var(--accent); padding: 18px 30px;
            font-size: 1rem; font-weight: bold; cursor: pointer;
            border: 2px solid var(--accent); border-radius: 8px;
            transition: background-color 0.3s, color 0.3s;
            -webkit-tap-highlight-color: transparent;
        }

        .action-button:hover, .action-button:focus { background-color: var(--accent-dark); outline: none; }
        #video-overlay { z-index: 1001; }
        #anniversary-video { width: 95%; max-width: 900px; border-radius: 12px; border: 2px solid var(--accent); }
        .close-btn { position: absolute; top: 20px; right: 25px; font-size: 45px; font-weight: bold; color: white; cursor: pointer; line-height: 1; }
        #ar-instructions { z-index: 50; background: rgba(10, 25, 47, 0.8); }
        .marker-preview { max-width: 150px; border: 3px solid var(--accent); border-radius: 8px; margin-top: 1rem; }

        .loader-content p { margin-top: 20px; font-size: 1.1rem; color: var(--accent); }
        .spinner {
            border: 6px solid var(--accent-dark); border-top: 6px solid var(--accent);
            border-radius: 50%; width: 60px; height: 60px;
            animation: spin 1.5s linear infinite;
        }

        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        @media (min-width: 768px) { .button-container { flex-direction: row; justify-content: center; } }
    </style>
</head>

<body>
    <div id="loader" class="overlay active">
        <div class="loader-content">
            <div class="spinner"></div>
            <p>Ø¯Ø± Ø­Ø§Ù„ Ø¢Ù…Ø§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ Ø¬Ø§Ø¯Ùˆ...</p>
        </div>
    </div>

    <div id="start-container" class="overlay">
        <div class="content">
            <h1>Ø³Ø§Ù„Ú¯Ø±Ø¯ Ø¹Ø´Ù‚Ù…ÙˆÙ† Ù…Ø¨Ø§Ø±Ú©</h1>
            <p>ÛŒÚ© Ø®Ø§Ø·Ø±Ù‡ Ø±Ùˆ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†</p>
            <div class="button-container">
                <button id="watch-video-btn" class="action-button">ðŸŽ¬ ØªÙ…Ø§Ø´Ø§ÛŒ Ú©Ù„ÛŒÙ¾ Ø®Ø§Ø·Ø±Ø§Øª</button>
                <button id="start-ar-btn" class="action-button">âœ¨ Ú¯Ø§Ù„Ø±ÛŒ Ø¹Ú©Ø³â€ŒÙ‡Ø§ÛŒ Ø¬Ø§Ø¯ÙˆÛŒÛŒ</button>
            </div>
        </div>
    </div>

    <div id="video-overlay" class="overlay">
        <span id="close-video-btn" class="close-btn">&times;</span>
        <video id="anniversary-video" controls preload="metadata">
            <source src="YOUR_VIDEO_LINK.mp4" type="video/mp4">
            Ù…Ø±ÙˆØ±Ú¯Ø± Ø´Ù…Ø§ Ø§Ø² Ù¾Ø®Ø´ ÙˆÛŒØ¯ÛŒÙˆ Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ Ù†Ù…ÛŒâ€ŒÚ©Ù†Ø¯.
        </video>
    </div>

    <div id="ar-instructions" class="overlay">
        <div class="content">
            <p>Ø¯ÙˆØ±Ø¨ÛŒÙ† Ø±Ø§ Ø¨Ù‡ Ø³Ù…Øª Ù†Ø´Ø§Ù†Ú¯Ø± Ø²ÛŒØ± Ø¹Ú©Ø³ Ø§ØµÙ„ÛŒ Ø¨Ú¯ÛŒØ±ÛŒØ¯</p>
            <img src="YOUR_MARKER_IMAGE_LINK.png" alt="Marker Example" class="marker-preview">
        </div>
    </div>

    <a-scene
        id="ar-scene"
        vr-mode-ui="enabled: false;"
        renderer="logarithmicDepthBuffer: true; colorManagement: true;"
        arjs="sourceType: webcam; detectionMode: mono_and_matrix; matrixCodeType: 3x3; debugUIEnabled: false;"
        style="display: none;">

        <a-assets timeout="30000">
            <img id="photo1" src="https://placehold.co/800x800/e74c3c/ffffff?text=Photo+1" crossorigin="anonymous">
            <img id="photo2" src="https://placehold.co/800x800/3498db/ffffff?text=Photo+2" crossorigin="anonymous">
            <img id="photo3" src="https://placehold.co/800x800/2ecc71/ffffff?text=Photo+3" crossorigin="anonymous">
            <img id="photo4" src="https://placehold.co/800x800/f1c40f/ffffff?text=Photo+4" crossorigin="anonymous">
            <img id="photo5" src="https://placehold.co/800x800/9b59b6/ffffff?text=Photo+5" crossorigin="anonymous">
            
            <img id="frame-bg" src="https://i.imgur.com/gRh0nWh.png" crossorigin="anonymous">
        </a-assets>

        <a-marker id="animated-marker" type="pattern" url="YOUR_PATTERN_MARKER_LINK.patt" smooth="true" smoothCount="5">
            <a-entity id="gallery-container" position="0 0.1 0" scale="0 0 0" visible="false" animation__scale="property: scale; to: 1 1 1; dur: 1500; easing: easeOutElastic; startEvents: markerFound" animation__rotation="property: rotation; from: -90 0 90; to: -90 0 0; dur: 1000; delay: 500; easing: easeOutCubic; startEvents: markerFound">
                <a-entity position="0 0 0">
                    <a-plane material="src: #photo1" width="0.8" height="0.8" position="0 0 0.01"></a-plane>
                    <a-plane material="src: #frame-bg; transparent: true;" width="0.88" height="0.88" position="0 0 0"></a-plane>
                </a-entity>
                <a-entity position="-0.8 0.5 0" rotation="0 0 -15">
                    <a-plane material="src: #photo2" width="0.5" height="0.5" position="0 0 0.01"></a-plane>
                    <a-plane material="src: #frame-bg; transparent: true;" width="0.58" height="0.58" position="0 0 0"></a-plane>
                </a-entity>
                <a-entity position="0.8 0.4 0" rotation="0 0 12">
                    <a-plane material="src: #photo3" width="0.5" height="0.6" position="0 0 0.01"></a-plane>
                    <a-plane material="src: #frame-bg; transparent: true;" width="0.58" height="0.68" position="0 0 0"></a-plane>
                </a-entity>
                <a-entity position="-0.6 -0.6 0" rotation="0 0 10">
                    <a-plane material="src: #photo4" width="0.45" height="0.45" position="0 0 0.01"></a-plane>
                    <a-plane material="src: #frame-bg; transparent: true;" width="0.53" height="0.53" position="0 0 0"></a-plane>
                </a-entity>
                <a-entity position="0.7 -0.7 0" rotation="0 0 -18">
                    <a-plane material="src: #photo5" width="0.5" height="0.5" position="0 0 0.01"></a-plane>
                    <a-plane material="src: #frame-bg; transparent: true;" width="0.58" height="0.58" position="0 0 0"></a-plane>
                </a-entity>
            </a-entity>
        </a-marker>
        <a-entity camera></a-entity>
    </a-scene>

    <script>
        // --- Ú©Ø¯Ù‡Ø§ÛŒ JavaScript ---
        window.addEventListener('load', () => {
            const elements = {
                loader: document.getElementById('loader'),
                startContainer: document.getElementById('start-container'),
                arScene: document.getElementById('ar-scene'),
                watchVideoBtn: document.getElementById('watch-video-btn'),
                startArBtn: document.getElementById('start-ar-btn'),
                videoOverlay: document.getElementById('video-overlay'),
                videoPlayer: document.getElementById('anniversary-video'),
                closeVideoBtn: document.getElementById('close-video-btn'),
                arInstructions: document.getElementById('ar-instructions'),
                marker: document.getElementById('animated-marker'),
                galleryContainer: document.getElementById('gallery-container')
            };

            elements.loader.classList.remove('active');
            elements.startContainer.classList.add('active');

            elements.watchVideoBtn.addEventListener('click', () => {
                elements.videoOverlay.classList.add('active');
                elements.videoPlayer.play();
            });

            elements.closeVideoBtn.addEventListener('click', () => {
                elements.videoOverlay.classList.remove('active');
                elements.videoPlayer.pause();
                elements.videoPlayer.currentTime = 0;
            });

            elements.startArBtn.addEventListener('click', () => {
                elements.startContainer.classList.remove('active');
                elements.arScene.style.display = 'block';
                elements.arInstructions.classList.add('active');
                setTimeout(() => {
                    elements.arInstructions.classList.remove('active');
                }, 5000);
            });

            elements.marker.addEventListener('markerFound', () => {
                elements.galleryContainer.setAttribute('visible', 'true');
            });

            elements.marker.addEventListener('markerLost', () => {
                elements.galleryContainer.setAttribute('visible', 'false');
            });
        });
    </script>
</body>
</html>
